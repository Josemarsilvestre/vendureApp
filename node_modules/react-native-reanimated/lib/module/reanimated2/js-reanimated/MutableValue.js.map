{"version":3,"names":["MutableValue","constructor","value","setter","_defineProperty","_id","MUTABLE_ID","_value","_setter","nextValue","_setValue","newValue","_triggerListener","addListener","listener","_listeners","push","i","len","length"],"sources":["MutableValue.ts"],"sourcesContent":["export default class MutableValue<T> {\n  static MUTABLE_ID = 1;\n  _id: number;\n  _value: T;\n  _setter: (value: T) => void;\n  _animation = null;\n  _listeners: (() => void)[] = [];\n\n  constructor(value: T, setter: (value: T) => void) {\n    this._id = MutableValue.MUTABLE_ID++;\n    this._value = value;\n    this._setter = setter;\n  }\n\n  get value(): T {\n    return this._value;\n  }\n\n  set value(nextValue: T) {\n    this._setter(nextValue);\n  }\n\n  // this changes the value finally and is supposed to be called from this._setter\n  _setValue(newValue: T): void {\n    this._value = newValue;\n    this._triggerListener();\n  }\n\n  addListener(listener: () => void): void {\n    this._listeners.push(listener);\n  }\n\n  _triggerListener(): void {\n    for (let i = 0, len = this._listeners.length; i < len; ++i) {\n      this._listeners[i]();\n    }\n  }\n}\n"],"mappings":";;;AAAA,eAAe,MAAMA,YAAY,CAAI;EAQnCC,WAAWA,CAACC,KAAQ,EAAEC,MAA0B,EAAE;IAAAC,eAAA;IAAAA,eAAA;IAAAA,eAAA;IAAAA,eAAA,qBAHrC,IAAI;IAAAA,eAAA,qBACY,EAAE;IAG7B,IAAI,CAACC,GAAG,GAAGL,YAAY,CAACM,UAAU,EAAE;IACpC,IAAI,CAACC,MAAM,GAAGL,KAAK;IACnB,IAAI,CAACM,OAAO,GAAGL,MAAM;EACvB;EAEA,IAAID,KAAKA,CAAA,EAAM;IACb,OAAO,IAAI,CAACK,MAAM;EACpB;EAEA,IAAIL,KAAKA,CAACO,SAAY,EAAE;IACtB,IAAI,CAACD,OAAO,CAACC,SAAS,CAAC;EACzB;;EAEA;EACAC,SAASA,CAACC,QAAW,EAAQ;IAC3B,IAAI,CAACJ,MAAM,GAAGI,QAAQ;IACtB,IAAI,CAACC,gBAAgB,EAAE;EACzB;EAEAC,WAAWA,CAACC,QAAoB,EAAQ;IACtC,IAAI,CAACC,UAAU,CAACC,IAAI,CAACF,QAAQ,CAAC;EAChC;EAEAF,gBAAgBA,CAAA,EAAS;IACvB,KAAK,IAAIK,CAAC,GAAG,CAAC,EAAEC,GAAG,GAAG,IAAI,CAACH,UAAU,CAACI,MAAM,EAAEF,CAAC,GAAGC,GAAG,EAAE,EAAED,CAAC,EAAE;MAC1D,IAAI,CAACF,UAAU,CAACE,CAAC,CAAC,EAAE;IACtB;EACF;AACF;AAACb,eAAA,CArCoBJ,YAAY,gBACX,CAAC"}