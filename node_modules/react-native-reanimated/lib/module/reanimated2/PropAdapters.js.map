{"version":3,"names":["addWhitelistedNativeProps","createAnimatedPropAdapter","adapter","nativeProps","nativePropsToAdd","forEach","prop","SVGAdapter","props","keys","Object","includes","Array","isArray","transform","length","Error","x","y","translateX","translateY","arr","replace","split","parseFloat","TextInputAdapter","text","value"],"sources":["PropAdapters.ts"],"sourcesContent":["import { addWhitelistedNativeProps } from '../ConfigHelper';\nimport { AdapterWorkletFunction } from './commonTypes';\n\nexport function createAnimatedPropAdapter(\n  adapter: AdapterWorkletFunction,\n  nativeProps?: string[]\n): AdapterWorkletFunction {\n  const nativePropsToAdd: { [key: string]: boolean } = {};\n  // eslint-disable-next-line no-unused-expressions\n  nativeProps?.forEach((prop) => {\n    nativePropsToAdd[prop] = true;\n  });\n  addWhitelistedNativeProps(nativePropsToAdd);\n  return adapter;\n}\n\n// ADAPTERS\n\nexport const SVGAdapter: AdapterWorkletFunction = createAnimatedPropAdapter(\n  (props) => {\n    'worklet';\n    const keys = Object.keys(props);\n    // transform\n    if (keys.includes('transform')) {\n      if (Array.isArray(props.transform)) {\n        // case of array with 6 values => https://github.com/react-native-svg/react-native-svg/blob/b2e2c355204ff4b10973d3afce1495f7e4167ff7/src/elements/Shape.tsx#L200\n        if (props.transform.length !== 6) {\n          throw new Error(\n            `invalid transform length of ${props.transform.length}, should be 6`\n          );\n        }\n        const transform: number[] = props.transform as number[];\n        const x: number = (props.x as number) ?? 0;\n        const y: number = (props.y as number) ?? 0;\n        props.transform = [\n          { translateX: transform[0] * x + transform[2] * y + transform[4] },\n          { translateY: transform[1] * x + transform[3] * y + transform[5] },\n        ];\n      } else if (typeof props.transform === 'string') {\n        // case of string 'translate(translateX translateY)'\n        // todo: handle other cases of transform string like here https://github.com/react-native-svg/react-native-svg/blob/b2e2c355204ff4b10973d3afce1495f7e4167ff7/src/lib/extract/extractTransform.ts#L184\n        const transform: string = props.transform as string;\n        const arr = transform\n          .replace('translate(', '')\n          .replace(')', '')\n          .split(' ');\n        props.transform = [\n          { translateX: parseFloat(arr[0]) },\n          { translateY: parseFloat(arr[1]) },\n        ];\n      }\n    }\n    // todo: other props\n  }\n);\n\nexport const TextInputAdapter = createAnimatedPropAdapter(\n  (props) => {\n    'worklet';\n    const keys = Object.keys(props);\n    // convert text to value like RN does here: https://github.com/facebook/react-native/blob/f2c6279ca497b34d5a2bfbb6f2d33dc7a7bea02a/Libraries/Components/TextInput/TextInput.js#L878\n    if (keys.includes('value')) {\n      props.text = props.value;\n      delete props.value;\n    }\n  },\n  ['text']\n);\n"],"mappings":"AAAA,SAASA,yBAAyB,QAAQ,iBAAiB;AAG3D,OAAO,SAASC,yBAAyBA,CACvCC,OAA+B,EAC/BC,WAAsB,EACE;EACxB,MAAMC,gBAA4C,GAAG,CAAC,CAAC;EACvD;EACAD,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEE,OAAO,CAAEC,IAAI,IAAK;IAC7BF,gBAAgB,CAACE,IAAI,CAAC,GAAG,IAAI;EAC/B,CAAC,CAAC;EACFN,yBAAyB,CAACI,gBAAgB,CAAC;EAC3C,OAAOF,OAAO;AAChB;;AAEA;;AAEA,OAAO,MAAMK,UAAkC,GAAGN,yBAAyB,CACxEO,KAAK,IAAK;EACT,SAAS;;EACT,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACD,KAAK,CAAC;EAC/B;EACA,IAAIC,IAAI,CAACE,QAAQ,CAAC,WAAW,CAAC,EAAE;IAC9B,IAAIC,KAAK,CAACC,OAAO,CAACL,KAAK,CAACM,SAAS,CAAC,EAAE;MAClC;MACA,IAAIN,KAAK,CAACM,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;QAChC,MAAM,IAAIC,KAAK,CACZ,+BAA8BR,KAAK,CAACM,SAAS,CAACC,MAAO,eAAc,CACrE;MACH;MACA,MAAMD,SAAmB,GAAGN,KAAK,CAACM,SAAqB;MACvD,MAAMG,CAAS,GAAIT,KAAK,CAACS,CAAC,IAAe,CAAC;MAC1C,MAAMC,CAAS,GAAIV,KAAK,CAACU,CAAC,IAAe,CAAC;MAC1CV,KAAK,CAACM,SAAS,GAAG,CAChB;QAAEK,UAAU,EAAEL,SAAS,CAAC,CAAC,CAAC,GAAGG,CAAC,GAAGH,SAAS,CAAC,CAAC,CAAC,GAAGI,CAAC,GAAGJ,SAAS,CAAC,CAAC;MAAE,CAAC,EAClE;QAAEM,UAAU,EAAEN,SAAS,CAAC,CAAC,CAAC,GAAGG,CAAC,GAAGH,SAAS,CAAC,CAAC,CAAC,GAAGI,CAAC,GAAGJ,SAAS,CAAC,CAAC;MAAE,CAAC,CACnE;IACH,CAAC,MAAM,IAAI,OAAON,KAAK,CAACM,SAAS,KAAK,QAAQ,EAAE;MAC9C;MACA;MACA,MAAMA,SAAiB,GAAGN,KAAK,CAACM,SAAmB;MACnD,MAAMO,GAAG,GAAGP,SAAS,CAClBQ,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CACzBA,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAChBC,KAAK,CAAC,GAAG,CAAC;MACbf,KAAK,CAACM,SAAS,GAAG,CAChB;QAAEK,UAAU,EAAEK,UAAU,CAACH,GAAG,CAAC,CAAC,CAAC;MAAE,CAAC,EAClC;QAAED,UAAU,EAAEI,UAAU,CAACH,GAAG,CAAC,CAAC,CAAC;MAAE,CAAC,CACnC;IACH;EACF;EACA;AACF,CAAC,CACF;;AAED,OAAO,MAAMI,gBAAgB,GAAGxB,yBAAyB,CACtDO,KAAK,IAAK;EACT,SAAS;;EACT,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACD,KAAK,CAAC;EAC/B;EACA,IAAIC,IAAI,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAE;IAC1BH,KAAK,CAACkB,IAAI,GAAGlB,KAAK,CAACmB,KAAK;IACxB,OAAOnB,KAAK,CAACmB,KAAK;EACpB;AACF,CAAC,EACD,CAAC,MAAM,CAAC,CACT"}